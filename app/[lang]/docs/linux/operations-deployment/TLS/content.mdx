
# TLS 
TLS(Transport Layer Security)는 네트워크 통신을 위한 보안 프로토콜입니다. TLS는 데이터 암호화, 무결성 검증, 서버 인증을 제공하여 안전한 통신을 가능하게 합니다. TLS는 HTTPS, SSH, SMTP, FTP 등 다양한 프로토콜에서 사용됩니다.  

## 브라우저 HTTPS 접속 시의 TLS 절차
브라우저와 서버 간 TLS 통신은 다음과 같은 7단계 절차로 이루어집니다.

1. 클라이언트 헬로:

클라이언트는 지원하는 TLS 버전, 암호화 알고리즘 및 압축 알고리즘 목록을 포함하는 "클라이언트 헬로" 메시지를 서버로 전송합니다.
클라이언트는 또한 임의의 난수(Pre-Master Secret)를 생성합니다.
2. 서버 헬로:

서버는 지원하는 TLS 버전, 암호화 알고리즘 및 압축 알고리즘을 선택하여 "서버 헬로" 메시지를 클라이언트에게 전송합니다.
서버는 자신의 인증서를 클라이언트에게 전송합니다.
서버는 임의의 난수(Pre-Master Secret)를 생성합니다.
3. 서버 인증서 검증:

클라이언트는 신뢰할 수 있는 인증 기관(CA)의 인증서 저장소에서 서버 인증서를 검증합니다.
인증서 검증에 실패하면 연결이 종료됩니다.
4. 협상:

클라이언트와 서버는 "클라이언트 키 교환" 메시지를 통해 서로에게 자신의 공개 키를 전송합니다.
클라이언트와 서버는 협상을 통해 세션 키(Session Key)를 생성합니다. 세션 키는 Pre-Master Secret과 공개 키를 사용하여 암호화됩니다.
5. 마스터 시크릿 생성:

클라이언트와 서버는 세션 키를 사용하여 마스터 시크릿(Master Secret)을 생성합니다.
6. 변경 사항 알림:

클라이언트와 서버는 "변경 사항 알림" 메시지를 통해 서로에게 암호화 알고리즘 및 압축 알고리즘 설정을 알립니다.
7. 애플리케이션 데이터 전송:

클라이언트와 서버는 세션 키를 사용하여 애플리케이션 데이터를 암호화하여 전송합니다.
브라우저의 개인키와 서버의 개인키로 임의의 난수를 암호화하는 과정:

클라이언트와 서버는 각자 임의의 난수(Pre-Master Secret)를 생성합니다.
클라이언트는 자신의 개인키를 사용하여 Pre-Master Secret을 암호화하고 서버에게 전송합니다.
서버는 자신의 개인키를 사용하여 클라이언트로부터 받은 암호화된 Pre-Master Secret을 해독합니다.
클라이언트와 서버는 해독된 Pre-Master Secret을 사용하여 세션 키(Session Key)를 생성합니다.
참고:

TLS는 데이터 암호화, 무결성 검증, 서버 인증을 제공합니다.
TLS는 HTTPS, SSH, SMTP, FTP 등 다양한 프로토콜에서 사용됩니다.
TLS는 다양한 암호화 알고리즘 및 압축 알고리즘을 지원합니다.


## SSH로 원격 서버에 접속할 때의 TLS 절차
SSH(Secure Shell)는 네트워크를 통해 안전하게 통신할 수 있도록 하는 프로토콜입니다. 원격 서버에 접속할 때, SSH는 TLS(Transport Layer Security)를 사용하여 데이터 암호화, 서버 인증, 사용자 인증을 수행합니다.

TLS 절차는 다음과 같이 진행됩니다.

1. 키 교환

클라이언트는 서버에게 지원하는 암호화 알고리즘과 키 길이를 포함한 헬로 메시지를 보냅니다.
서버는 클라이언트가 제안한 알고리즘 중 하나를 선택하고, 서버의 공개 키와 인증서를 클라이언트에게 보냅니다.
클라이언트는 서버의 인증서를 검증하고, 서버의 공개 키를 사용하여 임시 대칭 키를 생성합니다.
클라이언트는 임시 대칭 키를 암호화하여 서버에게 보냅니다.
2. 서버 인증

서버는 임시 대칭 키를 사용하여 클라이언트가 보낸 메시지를 해독하고, 클라이언트의 인증서를 요청합니다.
클라이언트는 자신의 인증서와 개인 키를 사용하여 서버에 인증 정보를 보냅니다.
서버는 클라이언트의 인증 정보를 검증하여 클라이언트를 인증합니다.
3. 암호화된 통신

서버와 클라이언트는 임시 대칭 키를 사용하여 모든 데이터를 암호화하고 해독합니다.
암호화된 통신을 통해 사용자는 원격 서버의 명령을 실행하거나 파일을 전송할 수 있습니다.
4. 세션 종료

통신이 끝나면 서버와 클라이언트는 연결을 닫고 임시 대칭 키를 삭제합니다.
참고 사항

SSH는 기본적으로 TLS 1.2를 사용하지만, 버전에 따라 다른 버전의 TLS를 지원할 수도 있습니다.
SSH 프로토콜 자체도 데이터 암호화를 지원하지만, TLS를 사용하면 더욱 강력한 보안을 제공할 수 있습니다.
SSH config 파일을 통해 TLS 설정을 변경할 수 있습니다.
TLS 절차에 대한 더 자세한 정보는 다음과 같은 사이트를 참고하십시오.

SSH 프로토콜: https://www.ssh.com/ssh/protocol/
TLS 프로토콜: https://www.ietf.org/rfc/rfc5246.txt